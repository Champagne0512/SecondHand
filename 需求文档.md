# 校园二手交易平台需求文档

## 1. 项目概述

### 1.1 项目背景
随着校园生活的丰富多彩，学生们在学习生活中积累了大量的二手物品，如教材、电子产品、生活用品等。传统的线下交易方式存在信息不透明、交易效率低、交易范围有限等问题。为了解决这些问题，提高校园二手物品交易效率，特开发此校园二手交易平台。

### 1.2 项目目标
构建一个专为校园学生服务的二手物品交易平台，提供安全、便捷、高效的交易环境，促进校园内资源的循环利用，降低学生的生活成本，同时增强校园社区的互动性。

### 1.3 项目范围
本项目涵盖用户注册登录、商品发布管理、搜索浏览、交易沟通、校园特色功能、AI智能助手、管理后台等核心功能模块，支持Web端访问，采用响应式设计适配移动端设备。

## 2. 功能需求

### 2.1 用户管理模块

#### 2.1.1 用户注册/登录
**功能描述：**
- 支持邮箱注册和登录
- 支持密码重置功能
- 支持用户头像上传和编辑
- 支持个人基本信息管理（昵称、联系方式、所在学院等）

**业务规则：**
- 用户必须提供有效的邮箱地址进行注册
- 密码长度不少于6位字符
- 每个邮箱只能注册一个账号
- 用户注册后需要完善基本信息才能发布商品

**输入要求：**
- 邮箱：符合邮箱格式规范
- 密码：6-20位字符，建议包含字母和数字
- 昵称：2-20位字符，不能包含特殊字符
- 头像：支持JPG、PNG格式，大小不超过2MB

#### 2.1.2 个人中心
**功能描述：**
- 个人信息展示和编辑
- 我的发布商品管理
- 我的收藏夹管理
- 购物车功能
- 交易记录查看
- 信用积分展示

**数据要求：**
- 用户基本信息：用户ID、昵称、邮箱、头像、联系方式、所在学院、注册时间
- 信用积分：基于交易评价计算的信用分数
- 收藏商品：用户收藏的商品列表
- 购物车：用户添加的商品项目

### 2.2 商品管理模块

#### 2.2.1 商品发布
**功能描述：**
- 支持多图片上传（最多6张）
- 商品标题、描述、价格设置
- 商品分类选择（电子产品、书籍教材、服装鞋帽、运动器材、生活用品、其他）
- 商品成色选择（全新、几乎全新、轻微使用痕迹、明显使用痕迹）
- 交易方式选择（当面交易、邮寄）
- 联系方式设置

**业务规则：**
- 商品标题长度限制：5-50个字符
- 商品描述长度限制：10-1000个字符
- 价格范围：0.01-99999元
- 每个用户最多同时发布20件商品
- 商品图片必须为实物拍摄，不得使用网络图片

**图片要求：**
- 格式：JPG、PNG、JPEG
- 单张大小：不超过5MB
- 尺寸：建议800x800像素以上
- 数量：1-6张

#### 2.2.2 商品搜索与浏览
**功能描述：**
- 首页商品展示（最新发布、热门商品）
- 分类浏览功能
- 关键词搜索（支持模糊匹配）
- 高级筛选（价格区间、成色、分类、排序方式）
- 商品详情页展示
- 相关商品推荐

**搜索功能：**
- 支持商品标题和描述的模糊搜索
- 支持多条件组合筛选
- 支持搜索结果排序（最新发布、价格从低到高、价格从高到低、最多浏览）
- 支持搜索历史记录

#### 2.2.3 商品状态管理
**功能描述：**
- 商品上架/下架操作
- 商品售出状态标记
- 商品信息编辑
- 商品删除

**状态定义：**
- 上架：商品正常展示，可交易
- 下架：商品暂时隐藏，不可交易
- 已售出：商品已售出，不再接受新的交易请求
- 已预订：商品已被预订，等待交易完成

### 2.3 交易沟通模块

#### 2.3.1 即时消息系统
**功能描述：**
- 买卖双方实时消息沟通
- 消息已读/未读状态
- 消息通知提醒
- 聊天记录保存
- 支持发送表情符号

**消息类型：**
- 文本消息
- 系统消息（交易状态变更通知）
- 商品链接分享

#### 2.3.2 交易流程
**功能描述：**
- 买家通过商品详情页联系卖家
- 双方协商交易细节
- 交易状态跟踪
- 交易完成后的评价

**交易状态：**
- 初步沟通：买家联系卖家，了解商品详情
- 价格协商：双方协商最终交易价格
- 交易安排：确定交易时间、地点、方式
- 交易完成：商品交付，款项支付
- 交易取消：交易未能完成

### 2.4 校园特色功能模块

#### 2.4.1 校园动态
**功能描述：**
- 发布校园相关动态（图文、交易、活动、求助）
- 动态评论和点赞
- 动态分类浏览
- 热门动态推荐

**动态类型：**
- 图文分享：校园生活照片和文字分享
- 交易信息：求购、转让信息
- 活动通知：校园活动信息发布
- 求助信息：学习、生活求助信息

#### 2.4.2 校园活动
**功能描述：**
- 校园活动发布
- 活动报名管理
- 活动信息展示
- 活动提醒通知

#### 2.4.3 失物招领
**功能描述：**
- 失物信息发布
- 招领信息发布
- 失物信息浏览和搜索
- 认领流程管理

#### 2.4.4 校园地图
**功能描述：**
- 校园地图展示
- 交易地点标记
- 常用交易地点推荐
- 位置分享功能

### 2.5 AI智能助手模块

#### 2.5.1 智能客服
**功能描述：**
- 24/7在线智能客服
- 常见问题自动回答
- 商品推荐与咨询
- 使用指导帮助

**AI模型支持：**
- DeepSeek模型：深度思考，适合复杂问题
- 简单模式：快速响应，适合常见问题
- 增强模式：综合分析，适合推荐场景

#### 2.5.2 AI配置管理
**功能描述：**
- AI模型选择配置
- 对话参数调整
- 模型切换功能
- 对话历史管理

### 2.6 数据分析模块

#### 2.6.1 价格分析
**功能描述：**
- 商品价格趋势分析
- 分类价格统计
- 市场均价计算
- 价格合理性评估

**分析指标：**
- 月度价格变化趋势
- 同类型商品均价对比
- 价格异常检测
- 价格预测建议

#### 2.6.2 用户行为分析
**功能描述：**
- 用户浏览行为追踪
- 商品热度统计
- 用户偏好分析
- 交易成功率统计

### 2.7 管理后台模块

#### 2.7.1 系统概览
**功能描述：**
- 用户统计数据（注册用户数、活跃用户、新增用户）
- 商品统计数据（发布商品数、成交商品数、商品分类分布）
- 交易统计数据（交易成功率、平均交易金额、交易纠纷率）
- 系统运行状态监控

#### 2.7.2 用户管理
**功能描述：**
- 用户列表查看
- 用户状态管理（正常、冻结、注销）
- 用户权限分配
- 用户行为日志查看

#### 2.7.3 商品管理
**功能描述：**
- 商品列表查看
- 商品审核（违规商品处理）
- 商品状态管理
- 商品推荐设置

#### 2.7.4 内容审核
**功能描述：**
- 商品信息审核
- 用户发布内容审核
- 举报信息处理
- 违规内容处理

**审核标准：**
- 禁止发布违法违规商品
- 禁止发布虚假信息
- 禁止侵犯他人权益
- 禁止发布不当言论

#### 2.7.5 系统配置
**功能描述：**
- 网站基础信息配置（名称、描述、联系方式）
- 用户发布限制配置（商品数量、图片数量）
- 自动审核规则配置
- 匿名浏览设置

### 2.8 推荐系统模块

#### 2.8.1 个性化推荐
**功能描述：**
- 基于用户浏览历史的推荐
- 基于用户收藏偏好的推荐
- 相似用户兴趣推荐
- 热门商品推荐

#### 2.8.2 智能推荐算法
**推荐策略：**
- 协同过滤算法：基于用户行为相似性
- 内容推荐算法：基于商品属性相似性
- 热门度推荐：基于商品热度和评价
- 混合推荐：综合多种推荐策略

## 3. 非功能需求

### 3.1 性能需求

#### 3.1.1 响应时间
- 页面加载时间：≤3秒
- 搜索响应时间：≤2秒
- 图片上传时间：≤5秒（单张5MB图片）
- 消息发送延迟：≤1秒

#### 3.1.2 并发能力
- 支持同时在线用户数：≥1000人
- 支持并发商品发布：≥50个/分钟
- 支持并发搜索请求：≥200个/分钟

#### 3.1.3 数据处理能力
- 支持商品数据量：≥10万条
- 支持用户数据量：≥5万条
- 支持消息数据量：≥100万条

### 3.2 可用性需求

#### 3.2.1 系统可用性
- 系统年可用性：≥99.9%
- 计划维护时间：≤4小时/月
- 故障恢复时间：≤30分钟

#### 3.2.2 用户体验
- 界面友好，操作直观
- 提供清晰的操作指引
- 支持多浏览器访问（Chrome、Firefox、Safari、Edge）
- 支持移动端响应式设计

### 3.3 安全性需求

#### 3.3.1 数据安全
- 用户密码加密存储
- 敏感信息传输加密（HTTPS）
- 用户隐私信息保护
- 数据备份与恢复机制

#### 3.3.2 访问控制
- 基于角色的权限管理
- 用户身份验证机制
- 操作权限控制
- 防止未授权访问

#### 3.3.3 安全防护
- SQL注入防护
- XSS攻击防护
- CSRF攻击防护
- 恶意文件上传防护

### 3.4 兼容性需求

#### 3.4.1 浏览器兼容性
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

#### 3.4.2 设备兼容性
- 支持桌面端（1920x1080、1366x768）
- 支持平板端（768x1024、834x1194）
- 支持手机端（375x667、414x896）

### 3.5 可维护性需求

#### 3.5.1 代码规范
- 统一的代码命名规范
- 完整的代码注释
- 模块化设计
- 组件化开发

#### 3.5.2 文档完整
- 需求文档完整
- 设计文档详细
- 接口文档清晰
- 部署文档完备

#### 3.5.3 监控与日志
- 系统运行监控
- 错误日志记录
- 性能监控
- 用户行为分析

## 4. 数据需求

### 4.1 数据模型

#### 4.1.1 用户数据
```sql
users {
  id: UUID (主键)
  email: VARCHAR(255) (邮箱)
  username: VARCHAR(50) (用户名)
  avatar_url: TEXT (头像URL)
  phone: VARCHAR(20) (手机号)
  college: VARCHAR(100) (学院)
  credit_score: INTEGER (信用积分)
  created_at: TIMESTAMP (创建时间)
  updated_at: TIMESTAMP (更新时间)
}
```

#### 4.1.2 商品数据
```sql
products {
  id: UUID (主键)
  title: VARCHAR(100) (标题)
  description: TEXT (描述)
  price: DECIMAL(10,2) (价格)
  category: VARCHAR(50) (分类)
  condition: VARCHAR(20) (成色)
  images: TEXT[] (图片数组)
  seller_id: UUID (卖家ID)
  status: VARCHAR(20) (状态)
  views: INTEGER (浏览次数)
  created_at: TIMESTAMP (创建时间)
  updated_at: TIMESTAMP (更新时间)
}
```

#### 4.1.3 消息数据
```sql
messages {
  id: UUID (主键)
  sender_id: UUID (发送者ID)
  receiver_id: UUID (接收者ID)
  product_id: UUID (商品ID)
  content: TEXT (内容)
  type: VARCHAR(20) (类型)
  is_read: BOOLEAN (是否已读)
  created_at: TIMESTAMP (创建时间)
}
```

### 4.2 数据质量要求

#### 4.2.1 数据完整性
- 关键数据不允许为空
- 外键关联完整性
- 数据格式一致性
- 业务逻辑完整性

#### 4.2.2 数据准确性
- 用户输入数据验证
- 系统自动数据校验
- 数据一致性检查
- 异常数据处理

#### 4.2.3 数据时效性
- 实时数据更新
- 历史数据归档
- 过期数据清理
- 数据同步机制

## 5. 接口需求

### 5.1 用户相关接口

#### 5.1.1 用户注册
```
POST /api/auth/register
请求参数：
{
  email: string,
  password: string,
  username: string
}
响应数据：
{
  success: boolean,
  message: string,
  data: {
    user_id: string,
    email: string,
    username: string
  }
}
```

#### 5.1.2 用户登录
```
POST /api/auth/login
请求参数：
{
  email: string,
  password: string
}
响应数据：
{
  success: boolean,
  message: string,
  data: {
    access_token: string,
    refresh_token: string,
    user: UserObject
  }
}
```

### 5.2 商品相关接口

#### 5.2.1 商品列表
```
GET /api/products
请求参数：
{
  page: number,
  limit: number,
  category?: string,
  keyword?: string,
  price_min?: number,
  price_max?: number,
  sort_by?: string
}
响应数据：
{
  success: boolean,
  data: {
    items: Product[],
    total: number,
    page: number,
    limit: number
  }
}
```

#### 5.2.2 商品发布
```
POST /api/products
请求参数：
{
  title: string,
  description: string,
  price: number,
  category: string,
  condition: string,
  images: string[],
  contact_info: string
}
响应数据：
{
  success: boolean,
  message: string,
  data: {
    product_id: string
  }
}
```

### 5.3 消息相关接口

#### 5.3.1 发送消息
```
POST /api/messages
请求参数：
{
  receiver_id: string,
  product_id: string,
  content: string,
  type: string
}
响应数据：
{
  success: boolean,
  message: string,
  data: {
    message_id: string
  }
}
```

#### 5.3.2 获取消息列表
```
GET /api/messages
请求参数：
{
  page: number,
  limit: number,
  type?: string
}
响应数据：
{
  success: boolean,
  data: {
    items: Message[],
    total: number,
    unread_count: number
  }
}
```

## 6. 部署需求

### 6.1 环境要求

#### 6.1.1 开发环境
- Node.js 16+
- npm 8+
- Git
- VS Code编辑器

#### 6.1.2 生产环境
- Web服务器：Nginx
- 应用服务器：Node.js
- 数据库：PostgreSQL
- 缓存：Redis
- CDN：静态资源加速

### 6.2 部署配置

#### 6.2.1 环境变量
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
VITE_APP_NAME=校园二手交易平台
VITE_APP_VERSION=1.0.0
```

#### 6.2.2 构建配置
- 开发模式：`npm run dev`
- 生产构建：`npm run build`
- 预览模式：`npm run preview`

### 6.3 监控与运维

#### 6.3.1 系统监控
- 服务器性能监控
- 数据库性能监控
- 应用性能监控
- 错误率监控

#### 6.3.2 日志管理
- 应用日志记录
- 错误日志收集
- 访问日志分析
- 安全日志审计

## 7. 测试需求

### 7.1 功能测试

#### 7.1.1 单元测试
- 组件功能测试
- API接口测试
- 工具函数测试
- 状态管理测试

#### 7.1.2 集成测试
- 用户注册登录流程测试
- 商品发布流程测试
- 交易沟通流程测试
- 支付流程测试

#### 7.1.3 系统测试
- 端到端功能测试
- 性能压力测试
- 安全漏洞测试
- 兼容性测试

### 7.2 用户体验测试

#### 7.2.1 界面测试
- 界面布局测试
- 响应式设计测试
- 交互体验测试
- 视觉一致性测试

#### 7.2.2 可用性测试
- 操作流程测试
- 错误提示测试
- 帮助文档测试
- 用户反馈收集

## 8. 项目交付物

### 8.1 技术文档
- 需求规格说明书
- 系统设计文档
- 数据库设计文档
- API接口文档
- 部署运维文档

### 8.2 源代码
- 前端Vue.js源代码
- 后端API源代码
- 数据库SQL脚本
- 配置文件

### 8.3 测试文档
- 测试计划
- 测试用例
- 测试报告
- 缺陷报告

### 8.4 用户文档
- 用户操作手册
- 管理员操作手册
- 常见问题解答
- 系统维护指南

## 9. 项目里程碑

### 9.1 第一阶段（需求分析与设计）
- 需求调研与分析
- 系统架构设计
- 数据库设计
- 界面原型设计

### 9.2 第二阶段（核心功能开发）
- 用户管理模块开发
- 商品管理模块开发
- 基础交易功能开发
- 消息系统开发

### 9.3 第三阶段（扩展功能开发）
- 校园特色功能开发
- AI智能助手集成
- 数据分析功能开发
- 管理后台开发

### 9.4 第四阶段（测试与优化）
- 系统功能测试
- 性能优化
- 安全测试
- 用户体验优化

### 9.5 第五阶段（部署与上线）
- 生产环境部署
- 数据迁移
- 系统上线
- 运维监控配置

## 10. 风险评估与应对

### 10.1 技术风险
**风险：** 新技术学习成本高，开发进度延迟
**应对：** 提前进行技术调研和培训，制定详细的技术方案

### 10.2 数据安全风险
**风险：** 用户数据泄露，系统被攻击
**应对：** 采用业界标准的安全措施，定期进行安全审计

### 10.3 性能风险
**风险：** 系统性能无法满足用户需求
**应对：** 进行充分的性能测试和优化，设计可扩展的架构

### 10.4 用户体验风险
**风险：** 用户界面不友好，用户接受度低
**应对：** 进行用户体验测试，收集用户反馈并持续改进

## 11. 后续规划

### 11.1 功能扩展
- 移动端APP开发
- 微信小程序集成
- 在线支付功能
- 物流配送服务

### 11.2 技术升级
- 人工智能算法优化
- 大数据分析能力提升
- 云服务架构升级
- 微服务架构改造

### 11.3 业务拓展
- 跨校区服务扩展
- 校外用户开放
- 商业合作模式
- 增值服务开发

---

**文档版本：** v1.0  
**最后更新：** 2025年11月11日  
**文档作者：** 项目开发团队  
**审核状态：** 待审核